import fs from"fs/promises";import path from"path";import readline from"readline";const rl=readline.createInterface({input:process.stdin,output:process.stdout});function askQuestion(e){return new Promise(a=>rl.question(e,a))}function generateSlug(e){return e.toLowerCase().replace(/√±/g,"n").replace(/√°/g,"a").replace(/√©/g,"e").replace(/√≠/g,"i").replace(/√≥/g,"o").replace(/√∫/g,"u").replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function sanitizeImageName(e){const a=path.extname(e);return`${path.basename(e,a).toLowerCase().replace(/√±/g,"n").replace(/√°/g,"a").replace(/√©/g,"e").replace(/√≠/g,"i").replace(/√≥/g,"o").replace(/√∫/g,"u").replace(/\s+/g,"-").replace(/[^\w\.\-]+/g,"")}${a.toLowerCase()}`}async function createPost(){console.log("--- Creando una nueva entrada para el blog ---");const e=await askQuestion("T√≠tulo del art√≠culo: ");if(!e)return console.error("El t√≠tulo es obligatorio. Abortando."),void rl.close();const a=await askQuestion("Subt√≠tulo: "),t=await askQuestion("Extracto (un p√°rrafo corto): "),o=await askQuestion("Nombre del archivo de imagen (ej: mi-imagen.jpg): ");rl.close();const r=`${generateSlug(e)}.html`,l=(new Date).toISOString().split("T")[0],n=sanitizeImageName(o),s=path.resolve("content/posts/posts-manifest.json"),c=path.resolve("article-template.html"),i=path.resolve(`content/posts/${r}`),p={title:e,subtitle:a,file:`posts/${r}`,image:n,excerpt:t,publicationDate:l};try{let t=await fs.readFile(c,"utf-8");t=t.replace(/{{TITLE}}/g,e).replace(/{{SUBTITLE}}/g,a).replace(/{{IMAGE_FILENAME}}/g,n).replace(/{{IMAGE_ALT}}/g,`Imagen para el art√≠culo: ${e}`),await fs.writeFile(i,t),console.log(`\n‚úÖ Archivo HTML creado en: ${i}`);const o=await fs.readFile(s,"utf-8"),r=JSON.parse(o);r.unshift(p),await fs.writeFile(s,JSON.stringify(r,null,2),"utf-8"),console.log(`‚úÖ Manifiesto actualizado en: ${s}`),console.log("\n--- ¬°√âxito! Pr√≥ximos pasos: ---"),console.log(`1. ‚úçÔ∏è  Abre el archivo "${i}" y escribe el contenido de tu art√≠culo.`),console.log(`2. üñºÔ∏è  Aseg√∫rate de que la imagen se llame "${n}" y col√≥cala en la carpeta "public/img/".`),console.log('3. üöÄ  Ejecuta "npm run dev" para previsualizar tu nuevo post.')}catch(e){console.error("‚ùå Ocurri√≥ un error durante la creaci√≥n del post:",e)}}createPost();