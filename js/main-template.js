async function fetchHtmlContent(e){const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch ${e}: ${t.statusText}`);return t.text()}function isMobileDevice(){return window.matchMedia("(max-width: 768px)").matches}function initializeDarkModeToggle(){const e="theme",t="dark-mode",n=document.querySelector(".dark-mode-toggle-desktop"),o=document.querySelector(".dark-mode-toggle-mobile"),i=document.body;function a(a){"dark"===a?(i.classList.add(t),n&&(n.textContent="☀️"),o&&(o.textContent="☀️")):(i.classList.remove(t),n&&(n.textContent="🌙"),o&&(o.textContent="🌙")),localStorage.setItem(e,a)}function c(){a("dark"===(localStorage.getItem(e)||(i.classList.contains(t)?"dark":"light"))?"light":"dark")}n&&n.addEventListener("click",c),o&&o.addEventListener("click",c);const r=localStorage.getItem(e),l=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;a(r||(l?"dark":"light"))}function initializeHamburgerMenu(){const e=document.querySelector(".hamburger-menu-icon"),t=document.querySelector(".nav-items-mobile"),n="is-open";e&&t?e.addEventListener("click",()=>{t.classList.toggle(n),e.textContent=t.classList.contains(n)?"✕":"☰"}):console.warn("Hamburger menu icon or main navigation not found. Hamburger menu functionality not initialized.")}function createStructuralElements(){const e=document.createElement("nav");e.classList.add("main-nav");const t=document.createElement("section");t.classList.add("subscription-section");return{navElement:e,subscriptionSectionElement:t,footerElement:document.createElement("footer")}}async function loadComponentContent(e){const{navElement:t,subscriptionSectionElement:n,footerElement:o}=e,i=isMobileDevice()?"/complements/nav-mobile.html":"/complements/nav-regular.html",[a,c,r]=await Promise.all([fetchHtmlContent(i),fetchHtmlContent("/complements/subscription-section.html"),fetchHtmlContent("/complements/footer.html")]);t.innerHTML=a,n.innerHTML=c,o.innerHTML=r}function appendElementsToDOM(e){const{navElement:t,subscriptionSectionElement:n,footerElement:o}=e,i=document.body,a=document.querySelector(".site-container");i.insertBefore(t,a),a.appendChild(n),i.appendChild(o)}function initializePageScripts(){initializeDarkModeToggle(),isMobileDevice()&&initializeHamburgerMenu()}export async function initializePageLayout(){try{const e=createStructuralElements();await loadComponentContent(e),appendElementsToDOM(e),initializePageScripts()}catch(e){throw console.error("Error durante la carga del layout:",e),e}}