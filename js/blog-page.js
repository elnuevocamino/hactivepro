import{initializePageLayout}from"./main-template.js";import{initializeSubscriptionForm}from"./subscribe.js";const API_BASE_URL="http://localhost:3000";function loadPostStyles(){const e=document.head;if(!e.querySelector('link[href="/css/post.css"]')){const t=document.createElement("link");t.rel="stylesheet",t.href="/css/post.css",e.appendChild(t)}}async function initializeCommentsSection(e,t){if(!e)return;const o=document.createElement("section");o.id="comments-section",o.className="comments-section",o.innerHTML='\n        <h2 class="section-title">Comentarios</h2>\n        <div id="comments-list">\n            \x3c!-- Simulación: en un caso real, aquí se cargarían los comentarios existentes --\x3e\n            <p>Sé el primero en comentar.</p>\n        </div>\n        <form id="comment-form" class="comment-form">\n            <h3>Deja un comentario</h3>\n            <input type="text" name="author" placeholder="Tu nombre" required>\n            <textarea name="content" rows="4" placeholder="Escribe tu comentario aquí..." required></textarea>\n            <button type="submit">Publicar Comentario</button>\n        </form>\n    ',t.appendChild(o);const n=document.getElementById("comment-form");n.addEventListener("submit",e=>{e.preventDefault();const t=n.querySelector('[name="author"]').value,o=n.querySelector('[name="content"]').value;alert("¡Funcionalidad en desarrollo! Tu comentario se ha simulado."),console.log("Comentario simulado:",{author:t,content:o}),n.reset()})}async function renderPostPage(){if(document.querySelector(".site-container main"))try{const e=window.location.pathname.split("/"),t=e[e.length-1];if(!t)throw new Error("No se pudo determinar el archivo del post desde la URL para buscar metadatos.");const o="/content/blog/posts-manifest.json",n=await fetch(o);if(!n.ok)throw new Error(`No se pudo cargar el manifiesto: ${n.statusText}`);const a=(await n.json()).find(e=>e.file===`posts/${t}`);if(!a)return void console.warn(`No se encontraron metadatos para el post "${t}" en el manifiesto.`);document.title=`${a.title} - HacktivePro`}catch(e){console.error("Error al cargar el post:",e);const t=document.querySelector(".site-container main");t&&(t.innerHTML='<p class="error-message">No se pudo cargar el post. Es posible que el enlace esté roto o que el contenido haya sido eliminado.</p>')}else console.error("El contenedor <main> no fue encontrado en el layout.")}document.addEventListener("DOMContentLoaded",async()=>{await initializePageLayout(),initializeSubscriptionForm(),await renderPostPage()});