export function initialize(){const e=document.getElementById("entitiesContainer"),t=document.getElementById("addEntityBtn"),n=document.getElementById("entityTemplate"),o=document.getElementById("attributeTemplate");if(!(e&&t&&n&&o))return void console.error("Elementos para el diseñador de bases de datos no encontrados.");const a=()=>{const t=n.content.cloneNode(!0),o=t.querySelector(".entity-card");e.appendChild(t),r(o.querySelector(".attributes-container"))},r=e=>{const t=o.content.cloneNode(!0);e.appendChild(t)};t.addEventListener("click",a),e.addEventListener("click",e=>{if(e.target.classList.contains("add-attribute-btn")){const t=e.target.previousElementSibling;r(t)}e.target.classList.contains("remove-entity-btn")&&e.target.closest(".entity-card").remove(),e.target.classList.contains("remove-attribute-btn")&&e.target.closest(".attribute-row").remove()}),a()}export function generate(e){const t=t=>e.querySelector(`#${t}`)?.value.trim()||"";let n="Actúa como un Arquitecto de Datos y DBA experto. Diseña un esquema de base de datos para el siguiente proyecto.\n\n";n+="**Especificaciones del Proyecto:**\n",n+=`- Nombre del Proyecto: ${t("dbProjectName")}\n`,n+=`- Tipo de Base de Datos: ${t("dbType")}\n\n`,n+="**Entidades y Atributos:**\n";e.querySelectorAll(".entity-card").forEach(e=>{const t=e.querySelector(".entity-name").value;if(!t)return;n+=`\n**Entidad: ${t}**\n`;e.querySelectorAll(".attribute-row").forEach(e=>{const t=e.querySelector(".attribute-name").value,o=e.querySelector(".attribute-type").value,a=e.querySelector(".attribute-constraints").value;t&&o&&(n+=`- ${t} (${o})`,a&&(n+=` [${a}]`),n+="\n")})});const o=t("dbRelationships");o&&(n+=`\n**Relaciones:**\n${o}\n`);const a=t("dbRules");return a&&(n+=`\n**Reglas de Negocio y Restricciones:**\n${a}\n`),n+=`\n**Formato de Salida Solicitado:**\nGenera ${t("outputFormat")}.\n`,n+="\nEl diseño debe estar normalizado (si es SQL), ser eficiente y escalable. Justifica las decisiones clave, como la elección de tipos de datos o índices.",n}